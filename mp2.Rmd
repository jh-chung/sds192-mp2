---
title: "Mini-Project 2"
author: "Brigitte Goeler-Slough, Jay-Ho Chung, and Nathan Ives"
date: "March 19, 2018"
output:
  html_document:
    code_folding: hide
---

```{r, include=FALSE}
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
```

```{r, include=FALSE}
library(tidyverse)
library(gridExtra)
library(dplyr)
```

First, we thought we'd filter by contributions both for and against candidates to see if there was any interesting patterns. We looked specifically at house elections, which we had results for, to see if there was any connection between how much money candidates received and how likely they were to win.

```{r}
# Filtering out contributions that were against a candidate
negative_contributions <- contributions %>% 
  filter(transaction_type == "24A")

# Filtering out contributions that were for a candidate
positive_contributions <- contributions %>% 
  filter(transaction_type == "24E")

# Renaming a fec_id to cand_id for joining
h_elections <- house_elections %>% 
  rename(cand_id = fec_id)

# Finding candidates that were funded against
negative_candidates <- inner_join(negative_contributions, candidates, by = "cand_id") %>% 

  right_join(h_elections , by = "cand_id") %>% # Linking the candidates to their names, not just id number
  filter(!is.na(transaction_type)) %>% # Do not want NA transactions
  filter(!is.na(transaction_type)) %>% 
  group_by(cand_name, cand_party_affiliation, primary_votes,
           runoff_votes, general_votes, ge_winner) %>% 
  summarize(total_dollars = sum(transaction_amt)) %>% 
  arrange(desc(total_dollars))

positive_candidates <- inner_join(positive_contributions, candidates, by = "cand_id") %>% 
  right_join(h_elections, by = "cand_id") %>% 
  filter(!is.na(transaction_type)) %>% 
  group_by(cand_name, cand_party_affiliation, primary_votes,
  runoff_votes, general_votes, ge_winner) %>%
  summarize(total_dollars = sum(transaction_amt)) %>% 
  arrange(desc(total_dollars))
```


## Committees Dataset
tres_name: Treasurer's name
cmte_st1: Street 1 (Address)
cmte_st2: Street 2 (Address)
cmte_city: City or Town
cmte_state: State
cmte_zip: Zip Code
cmte_dsgn: Committee Designation
  + A = Authorized by a candidate
  + B = Lobbyist/Registrant PAC
  + D = Leadership PAC
  + J = Joint fundraiser
  + P = Principal campaign committee of a candidate
  + U = Unauthorized
cmte_type: Committee type
  + https://classic.fec.gov/finance/disclosure/metadata/CommitteeTypeCodes.shtml
cmte_party_affiliation: Party
  + https://classic.fec.gov/finance/disclosure/metadata/DataDictionaryPartyCodeDescriptions.shtml
cmte_filing_freq: Filing frequency
  + A = Administratively terminated
  + D = Debt
  + M = Monthly filer
  + Q = Quarterly filer
  + T = Terminated
  + W = Waived
org_type: Interest category group (seems important)
  + C = Corporation
  + L = Labor organization
  + M = Membership organization
  + T = Trade association
  + V = Cooperative
  + W = Corporation without capital stock
  
## Candidates Dataset
cand_id: Candidate identification.
  + A 9-character alpha-numeric code assigned to a candidate by the Federal Election Commission. The candidate ID for a specific candidate remains the same across election cycles as long as the candidate is running for the same office.
cand_name: Name of the candidate.
cand_party_affiliation: Party affiliation
  + https://classic.fec.gov/finance/disclosure/metadata/DataDictionaryPartyCodeDescriptions.shtml
cand_election_yr
